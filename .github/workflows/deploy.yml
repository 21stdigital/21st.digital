name: Deploy to Staging

on:
  push:
    branches:
      - main

concurrency:
  group: staging
  cancel-in-progress: true

jobs:
  forge_deploy:
    name: Laravel Forge Deploy
    runs-on: ubuntu-latest
    environment: staging

    steps:
      - name: Deploy to Laravel Forge
        uses: jbrooksuk/laravel-forge-action@v1.0.4
        with:
          api_key: ${{ secrets.FORGE_API_KEY }}
          server_id: ${{ secrets.FORGE_SERVER_ID }}
          site_id: ${{ secrets.FORGE_SITE_ID }}
